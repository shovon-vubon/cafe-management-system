<!DOCTYPE html>
<html>
  <head>
	<script defer src="./injectScript.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="styleguide.css" />
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Visual treatment for unavailable items */
      .unavailable { filter: grayscale(80%) opacity(0.6); }
      .text-wrapper-unavailable { color: #b00; font-weight: bold; margin-top: 6px; }
    </style>
  </head>
  <body>

    
     <header>
      <div class="logo"><a href="index.html"><img class="logom" src="img/logo-1.png" /></a></div>
     <div class="nav-bar">
        <div class="buttons">
          <button class="back-button" onclick="window.history.back()"><img class="arrow" src="img/arrow.png" /></button>
          <a href="homepage.html" class="scan-button"><img class="scan" src="img/scan.png" /></a>
          <button class="profile-button" onclick="toggleProfileDropdown()"><img class="user" src="img/user.png" /></button>
        </div>
        <div id="profileDropdown" class="profile-dropdown">
          <div class="dropdown-header">
            <div class="dropdown-user-icon">
              <img class="dropdown-user" src="img/user.png" />
            </div>
            <div class="dropdown-user-info">
              <div class="dropdown-username">Admin12</div>
              <div class="dropdown-email">admin123@gmail.com</div>
            </div>
          </div>
          <button class="logout-button" onclick="logout()">Logout</button>
        </div>
      </div>
    </header>

    <div class="menu">
      
      <img class="burger-frenchfry" src="https://c.animaapp.com/mjqrn9gdiLSAUM/img/burger-frenchfry.png" />
      
      <div class="login-card">

        <div class="dashboard-buttons">
        <div class="div-2">
         <a href="menu.html"><img class="ellipse-9" src="https://c.animaapp.com/mjqrn9gdiLSAUM/img/ellipse-6.png" /></a>
          <div class="text-wrapper-6">Menu</div>
        </div>
        <div class="div-2">
          <a href="orders.html"><img class="ellipse-9" src="https://c.animaapp.com/mjqrn9gdiLSAUM/img/ellipse-6-1.png" /></a> 
          <div class="text-wrapper-7">Orders</div>
        </div>
        <div class="div-2">
          <a href="payment"><img class="ellipse-9" src="https://c.animaapp.com/mjqrn9gdiLSAUM/img/ellipse-6-2.png" /></a>
          <div class="text-wrapper-8">Payment</div>
        </div>
        <div class="div-2">
          <a href="table.html"><img class="ellipse-9" src="https://c.animaapp.com/mjqrn9gdiLSAUM/img/ellipse-6-3.png" /></a>
          <div class="text-wrapper-9">Tables</div>
        </div>
        <div class="div-2">
          <a href="analytics.html"><img class="ellipse-9" src="https://c.animaapp.com/mjqrn9gdiLSAUM/img/ellipse-6-4.png" /></a>
          <div class="text-wrapper-10">Analytics</div>
        </div>
      </div>

      <div class="all-menu">
        <div class="group">
          <div class="rectangle">
          <a href="update_menu.html">

          <div class="item">
            <img class="rounded-rectangle" src="img/tehari.png" />
            <div class="text-wrapper">Chicken Tehari</div>
          </div>
           </a>

          <a href="update_menu.html">

          <div class="item">
            <img class="rounded-rectangle" src="img/drinks.png" />
            <div class="text-wrapper">Coke</div>
          </div>
          </a>
          <a href="update_menu.html">
          <div class="item">
            <img class="rounded-rectangle" src="img/coffee.png" />
            <div class="text-wrapper">Coffee</div>
          </div>
          </a>

          <a href="update_menu.html"></a>
          <div class="item">
            <img class="rounded-rectangle" src="img/noodles.png" />
            <div class="text-wrapper">Chicken Noodles</div>
          </div>
          </a>
          
          <a href="update_menu.html">
          <div class="item">
            <img class="rounded-rectangle" src="img/khichuri.png" />
            <div class="text-wrapper">Khichuri</div>
          </div>
          </a>


          
          </div>
        </div>
        <a href="add_menu.html" style="text-decoration: none;"><div class="add-menue-button">
          <div class="text-wrapper-5">ADD MENU</div>
        </div>
        </a>
      </div>
      </div>
      
      
      <footer class="footer">
        <div class="t-c">
          <div class="group-2">
            <div class="terms-conditions">Terms &amp; Conditions</div>
            <p class="p">Â© . All rights reserved</p>
            <div class="text-wrapper-11">Contact us</div>
          </div>
        </div>
      </footer>
      
        
    </div>
  </body>

  <script>
    function toggleProfileDropdown() {
      const dropdown = document.getElementById('profileDropdown');
      dropdown.classList.toggle('active');
    }

    function logout() {
      alert('Logging out...');
    }

    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('profileDropdown');
      const profileButton = document.querySelector('.profile-button');
      if (dropdown && profileButton && !profileButton.contains(event.target) && !dropdown.contains(event.target)) {
        dropdown.classList.remove('active');
      }
    });
    
    (function(){
      const key = 'qrcafe_menu_items';
      const raw = localStorage.getItem(key);
      let items = [];
      try { items = raw ? JSON.parse(raw) : []; } catch(e){ items = []; }

      const rectangle = document.querySelector('.all-menu .group .rectangle');
      if (!rectangle) return;

      // Remove any existing dynamic children so we can re-render cleanly
      // Keep static items if present but avoid duplicates by name
      const existingTitles = new Set(Array.from(rectangle.querySelectorAll('.text-wrapper')).map(n => n.textContent.trim()));
      // Render stored items (name, price, out-of-stock)
      items.forEach(it => {
        if (!it || !it.name) return;
        if (existingTitles.has(it.name)) return;
        const item = document.createElement('div');
        item.className = 'item';
        item.dataset.name = it.name;

        const img = document.createElement('img');
        img.className = 'rounded-rectangle';
        img.src = it.image || 'img/image-1.png';
        img.alt = it.name || '';

        const title = document.createElement('div');
        title.className = 'text-wrapper';
        title.textContent = it.name || 'Unnamed';

        const price = document.createElement('div');
        price.className = 'text-wrapper-price';
        price.textContent = it.price ? it.price : '';

        item.appendChild(img);
        item.appendChild(title);
        item.appendChild(price);

        if (it.outOfStock) {
          item.classList.add('unavailable');
          const badge = document.createElement('div');
          badge.className = 'text-wrapper-unavailable';
          badge.textContent = 'Unavailable';
          item.appendChild(badge);
        }

        rectangle.appendChild(item);
      });

      // Delegate clicks on items to navigate to update_menu.html with item name
      rectangle.addEventListener('click', function(e){
        const itemEl = e.target.closest('.item');
        if (!itemEl) return;
        const name = itemEl.dataset.name || (itemEl.querySelector('.text-wrapper') && itemEl.querySelector('.text-wrapper').textContent.trim());
        if (!name) return;
        try { localStorage.setItem('qrcafe_selected_item', JSON.stringify({ name })); } catch(_){ }
        window.location.href = 'update_menu.html?name=' + encodeURIComponent(name);
      });
    })();
  </script>
</html>